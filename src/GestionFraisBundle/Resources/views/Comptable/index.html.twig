{% extends '::base.html.twig' %}
{%  block body %}
    <div class="bandeau"></div>
    <div class="container">
        <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12" id="contenu" >
            <h2 class="">Fiche Frais</h2>
            <div class="bandeau"></div>
            <div class="row">
                <div class="col-lg-12">
                    {{ form_start(form, {'attr': {'class': 'form-inline'}}) }}

                    {# Les erreurs générales du formulaire. #}
                    {{ form_errors(form) }}

                    <div class="form-group">
                        {{ form_label(form.mois, "Date", {'label_attr': {'class': ''}}) }}
                        {# Affichage des erreurs pour ce champ précis. #}
                        <div class="form-group">

                            {{ form_errors(form.mois) }}
                            {# Génération de l'input. #}
                            {{ form_widget(form.mois, {'attr': {'class': ' ' } }) }}
                        </div>
                    </div>
                    <div class="form-group ">
                        {{ form_label(form.Visiteur, "Visiteur", {'label_attr': {'class': ' '}}) }}
                        {# Affichage des erreurs pour ce champ précis. #}

                        {{ form_errors(form.Visiteur) }}
                        {# Génération de l'input. #}
                        {{ form_widget(form.Visiteur, {'attr': {'class': 'form-control' } }) }}
                    </div>

                    <div class="form-group ">
                        {{ form_widget(form.Rechercher, {'attr': {'class': 'btn btn-default' } }) }}

                        {# Fermeture de la balise <form> du formulaire HTML #}
                        {{ form_end(form) }}
                    </div>
                </div>
            </div>
            <div class="bandeau"></div>
            <h4>Dernieres fiches :</h4>
            {% for uneFicheFrais in lesFicheFrais %}
                {% set libelleMois = [uneFicheFrais.mois[0:2],uneFicheFrais.mois[2:]]|join('/') %}

                <a class="lien-fiche" href="{{ path('ficheFrais_valider', {idFicheFrais: uneFicheFrais.id})}}">
                    <div class="row" id = "{{ uneFicheFrais.id }}">
                        <div class="col-sm-6">
                            <p>Visiteur : {{ uneFicheFrais.getIdvisiteur().getNom() }} {{ uneFicheFrais.getIdvisiteur().getPrenom() }}</p>
                        </div>
                        <div class="col-sm-6">
                            <p>Mois : {{ libelleMois }}</p>
                        </div>
                        <div class="col-sm-6">
                            <p>Date de modification : {{ uneFicheFrais.dateModif|date("d/m/Y") }}</p>
                        </div>
                        <div class="col-xs-12">
                            <p>Etat : {{uneFicheFrais.getIdetatfichefrais().getLibelle() }}</p>

                        </div>
                    </div>
                </a>
                <div class="bandeau-small"></div>
                {% else %}
                 <p>aucune</p>
            {% endfor %}
        </div>
    </div>
{% endblock  %}
